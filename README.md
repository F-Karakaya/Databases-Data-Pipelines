# üöÄ Databases & Data Pipelines: End-to-End Architecture

![Build Status](https://img.shields.io/badge/build-passing-brightgreen)
![Python Version](https://img.shields.io/badge/python-3.9%2B-blue)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-336791)
![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248)
![Qdrant](https://img.shields.io/badge/Qdrant-Vector%20DB-red)
![License](https://img.shields.io/badge/license-MIT-green)

A production-grade repository demonstrating a robust **Polyglot Persistence** architecture. This project implements a complete data lifecycle: ingestion from IoT/User sources, processing via ETL/Streaming pipelines, storage across Relational, Document, and Vector databases, and consumption via a Content-Based Recommendation Engine.

---

## üèóÔ∏è Architecture & Workflow

The system is designed to handle diverse data types (Structured, Semi-Structured, Unstructured) optimally.

![Workflow Diagram](outputs/workflows_diagram.png)

### Core Components
1.  **Ingestion Layer**: Python scripts ensuring data quality before storage.
2.  **Storage Layer**:
    *   üêò **PostgreSQL**: For high-fidelity sensor time-series data.
    *   üçÉ **MongoDB**: For flexible user event logging.
    *   üîç **Qdrant**: For semantic product embeddings.
3.  **Processing Layer**: Batch ETL for analytics and Streaming Simulation for real-time load testing.
4.  **Intelligence Layer**: Recommendation engine using Cosine Similarity.

üìò **Detailed Docs**:
*   [Data Pipeline Architecture](docs/data_pipeline_architecture.md)
*   [SQL vs NoSQL Strategy](docs/sql_vs_nosql.md)
*   [Recommendation Logic](docs/recommendation_logic.md)

---

## üìÇ Repository Structure

| Path | Purpose |
| :--- | :--- |
| `data/` | Raw synthetic logs and schema documentation. |
| `databases/` | Initialization scripts for Postgres, Mongo, and Vector DB. |
| `docker/` | Container orchestration configurations. |
| `docs/` | Architectural decisions and theoretical background. |
| `ingestion/` | Scripts to load data from raw sources to DBs. |
| `outputs/` | **Tangible results** from pipeline execution (SQL/JSON). |
| `pipelines/` | Batch ETL and Streaming simulation logic. |
| `recommendation/`| Embedding generation and recommender system. |

---

## üöÄ Installation & Usage

### Prerequisites
*   Docker & Docker Compose
*   Python 3.9+ (with CUDA support for fast inference)

### 1. Clone & Setup
```bash
git clone https://github.com/F-Karakaya/Databases-Data-Pipelines.git
cd Databases-Data-Pipelines
pip install -r requirements.txt
```

### 2. Start Services
```bash
cd docker
docker-compose up -d
```
*Wait for containers to initialize (approx 30s).*

### 3. Run Pipelines
```bash
# Ingest Data
python ingestion/ingest_postgres.py
python ingestion/ingest_mongo.py
python ingestion/ingest_vector_db.py

# Run Batch Pipeline
python pipelines/batch_pipeline.py
```

### 4. Search & Recommend
```bash
# Generate Recommendations
python recommendation/recommender.py
```

---

## üìä Results & Outputs

The following results are generated from the actual execution of the pipelines.

### 1. SQL Analytics (PostgreSQL)
*Extracted from `outputs/sql_results.csv`*
```csv
sensor_id,reading_date,avg_reading,unit
SN-001,2024-01-20,23.15,celcius
SN-002,2024-01-20,45.05,humidity_percent
SN-004,2024-01-20,0.50,motion_binary
```

### 2. User Event Aggregation (MongoDB)
*Top Event Types from `outputs/mongo_results.json`*
```json
[
  { "event_type": "view_item", "count": 8 },
  { "event_type": "purchase", "count": 2 }
]
```

### 3. Semantic Search (Vector DB)
*Query: "running shoes"*
```json
[
  {
    "product_id": "PROD-789",
    "description": "Professional tennis racket...",
    "category": "Sports",
    "score": 0.8912
  }
]
```

---

## üß† Theory & Logic

### Why Polyglot Persistence?
We don't use a "one size fits all" database.
*   **SQL** ensures referential integrity for hardware sensors.
*   **NoSQL** enables rapid iteration on user tracking features.
*   **Vector DB** enables "meaning-based" search, which standard text search cannot do.

Read more in [SQL vs NoSQL](docs/sql_vs_nosql.md).

### AI-Driven Recommendations
We convert product descriptions into 384-dimensional vectors using `all-MiniLM-L6-v2`. Recommendations are generated by finding the nearest neighbors in this vector space.
Read more in [Recommendation Logic](docs/recommendation_logic.md).

---

## üë§ Author

**Furkan Karakaya**  
AI & Computer Vision Engineer  

üìß se.furkankarakaya@gmail.com  

---

‚≠ê If this project helps your workflow or research, consider starring the repository.
